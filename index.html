<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSM Live Dashboard - Academy Enrollment</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            text-align: center;
        }
        h1 {
            color: #52130C;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .countdown {
            font-size: 1.8rem;
            font-weight: bold;
            color: #dc3545;
            margin: 20px 0;
            padding: 20px;
            background: #fff2f2;
            border-radius: 8px;
            border: 2px solid #dc3545;
        }

        /* Tabs */
        .tabs-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }
        .tabs-nav {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
        }
        .tab-button {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
        }
        .tab-button.active {
            background: white;
            color: #52130C;
            border-bottom: 3px solid #52130C;
        }
        .tab-button:hover {
            background: #e9ecef;
            color: #52130C;
        }
        .tab-content {
            display: none;
            padding: 30px;
        }
        .tab-content.active {
            display: block;
        }

        .metrics-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .section-title {
            color: #52130C;
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .metric-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #52130C;
        }
        .metric-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #52130C;
            margin-bottom: 8px;
        }
        .metric-label {
            font-size: 0.8rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .academy-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            border-left: 5px solid #2196f3;
        }
        .academy-section h3 {
            color: #1976d2;
            margin-bottom: 20px;
            text-align: center;
        }
        .payment-plans {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .plan {
            display: inline-block;
            background: #f8f9fa;
            padding: 15px 20px;
            margin: 5px;
            border-radius: 6px;
            border: 2px solid #52130C;
        }
        .plan-label {
            font-weight: bold;
            color: #52130C;
        }
        .status-bar {
            background: #28a745;
            color: white;
            padding: 15px;
            text-align: center;
            border-radius: 8px;
            margin: 20px 0;
            font-weight: bold;
        }
        .charts-section {
            margin: 30px 0;
        }
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin: 20px 0;
        }
        .full-width-chart {
            width: 100%;
            margin: 20px 0;
        }
        .large-chart {
            height: 400px;
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
        .chart-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }
        .chart-box h3 {
            color: #52130C;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }
        .historical-highlight {
            border-left: 4px solid #28a745;
        }
        .update-time {
            text-align: center;
            color: #888;
            font-size: 0.9rem;
            margin-top: 20px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        @media (max-width: 768px) {
            .container { padding: 10px; }
            h1 { font-size: 2rem; }
            .countdown { font-size: 1.4rem; }
            .metrics-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
            .charts-grid { grid-template-columns: 1fr; }
            .tabs-nav { flex-direction: column; }
            .tab-button { padding: 12px; }
        }

        /* Password Protection Styles */
        .password-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        .password-container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 90%;
        }
        .password-container h2 {
            margin-bottom: 10px;
            color: #333;
        }
        .password-container p {
            color: #666;
            margin-bottom: 20px;
            font-size: 14px;
        }
        .password-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            margin-bottom: 15px;
            box-sizing: border-box;
        }
        .password-input:focus {
            outline: none;
            border-color: #007bff;
        }
        .password-submit {
            width: 100%;
            padding: 12px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .password-submit:hover {
            background: #0056b3;
        }
        .password-error {
            color: #dc3545;
            margin-top: 10px;
            font-size: 14px;
            display: none;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Password Protection Overlay -->
    <div id="passwordOverlay" class="password-overlay">
        <div class="password-container">
            <h2>üîê Access Required</h2>
            <p>Enter password to view MSM Live Dashboard</p>
            <input type="password" id="passwordInput" class="password-input" placeholder="Password" />
            <button onclick="checkPassword()" class="password-submit">Access Dashboard</button>
            <div id="passwordError" class="password-error">Incorrect password. Please try again.</div>
        </div>
    </div>

    <div id="mainContent" class="hidden">
    <div class="container">
        <div class="header">
            <h1>üöÄ MSM Live Event Dashboard</h1>
            <div class="countdown" id="countdown">‚è∞ Academy Enrollment Opens in 28 minutes (1:00 PM CST)</div>
        </div>

        <div class="status-bar">
            ‚úÖ All Monitoring Systems Operational ‚Ä¢ Revenue Tracking Active ‚Ä¢ Historical Comparison Active
        </div>

        <div class="tabs-container">
            <div class="tabs-nav">
                <button class="tab-button active" onclick="switchTab('feb2026')">February 2026 (LIVE)</button>
                <button class="tab-button" onclick="switchTab('sept2025')">September 2025</button>
                <button class="tab-button" onclick="switchTab('feb2025')">February 2025</button>
            </div>

            <!-- FEBRUARY 2026 TAB (ACTIVE) -->
            <div class="tab-content active" id="feb2026">
                <!-- TICKET METRICS SECTION -->
                <div class="metrics-section">
                    <h2 class="section-title">üé´ Ticket Sales Performance</h2>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value">5,663</div>
                            <div class="metric-label">Total Tickets Sold</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">3,333</div>
                            <div class="metric-label">General Admission</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">2,330</div>
                            <div class="metric-label">VIP Tickets</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">$636,651</div>
                            <div class="metric-label">Total Ticket Revenue</div>
                        </div>
                    </div>
                </div>

                <!-- CURRENT EVENT METRICS -->
                <div class="metrics-section">
                    <h2 class="section-title">üìä Live Event Status</h2>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value" id="current-attendees">2,922</div>
                            <div class="metric-label">Peak Concurrent Attendees</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="current-show-rate">55.3%</div>
                            <div class="metric-label">Peak Concurrent Show Rate</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">4,334</div>
                            <div class="metric-label">Unique Attendees (Total)</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">76.3%</div>
                            <div class="metric-label">Total Reach Rate</div>
                        </div>
                    </div>
                </div>

                <!-- ACADEMY ENROLLMENT SECTION -->
                <div class="academy-section">
                    <h3>üìö Academy Enrollment Tracking</h3>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value" id="academy-enrollments">321</div>
                            <div class="metric-label">Total Enrollments</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="plan-a-count">85</div>
                            <div class="metric-label">Plan A (5-Day Full) <span id="plan-a-percent">(65%)</span></div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="plan-b-count">46</div>
                            <div class="metric-label">Plan B (Extended) <span id="plan-b-percent">(35%)</span></div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="conversion-rate">5.09%</div>
                            <div class="metric-label">Conversion Rate</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="total-enrollment-revenue">$1,356,000</div>
                            <div class="metric-label">Total Enrollment Revenue</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="cash-collected">$262,000</div>
                            <div class="metric-label">Cash Collected ($2K Deposits)</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="deferred-revenue">$1,094,000</div>
                            <div class="metric-label">Deferred Revenue (Future)</div>
                        </div>
                    </div>
                    
                    <div class="payment-plans">
                        <h4 style="color: #1976d2; margin-bottom: 15px;">Payment Plan Breakdown:</h4>
                        <div class="plan">
                            <div class="plan-label">Plan A (5-Day Full)</div>
                            <div>$2K deposit + $8K day 5 = $10K total</div>
                        </div>
                        <div class="plan">
                            <div class="plan-label">Plan B (Extended)</div>
                            <div>$2K deposit + $3K day 5 + $3K day 30 + $3K day 60 = $11K total</div>
                        </div>
                    </div>
                </div>

                <!-- CHARTS SECTION -->
                <div class="charts-section">
                    <h2 class="section-title">üìä February 2026 Analytics</h2>
                    <p style="text-align: center; font-size: 0.8rem; color: #888; margin-top: -10px; margin-bottom: 20px;"><em>All times shown in Central Time (CT)</em></p>
                    
                    <!-- Full Width Cumulative Chart -->
                    <div class="chart-box full-width-chart">
                        <h3>üìà Cumulative Academy Enrollments - Event + 14-Day Attribution</h3>
                        <div class="chart-container large-chart">
                            <canvas id="feb2026-cumulative-chart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Comparative Chart: Sept 2025 vs Feb 2026 - READABLE TIMELINE -->
                    <div class="chart-box full-width-chart">
                        <h3>‚öîÔ∏è Academy Performance: September 2025 vs February 2026 (3 PM Day 2 ‚Üí Post-Event Attribution)</h3>
                        <p style="text-align: center; font-size: 0.85rem; color: #666; margin-top: -5px; margin-bottom: 15px;">
                            <strong>Red Line:</strong> September 2025 complete performance (305 final) - <em>TARGET TO CHASE</em> | 
                            <strong>Teal Line:</strong> February 2026 actual data only (current: 321 enrollments) - <em>85.6% of 375 goal</em>
                        </p>
                        <div class="chart-container large-chart">
                            <canvas id="comparative-enrollments-chart"></canvas>
                        </div>
                    </div>
                    
                    <div class="charts-grid">
                        <div class="chart-box">
                            <h3>üìä Day 1 Zoom Attendance</h3>
                            <div class="chart-container">
                                <canvas id="day1-attendance-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-box">
                            <h3>üìà Day 1 Show Rate Evolution</h3>
                            <div class="chart-container">
                                <canvas id="day1-showrate-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-box">
                            <h3>üìä Day 2 Zoom Attendance</h3>
                            <div class="chart-container">
                                <canvas id="day2-attendance-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-box">
                            <h3>üìà Day 2 Show Rate Evolution</h3>
                            <div class="chart-container">
                                <canvas id="day2-showrate-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-box">
                            <h3>üìä Day 3 Zoom Attendance (LIVE)</h3>
                            <div class="chart-container">
                                <canvas id="day3-attendance-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-box">
                            <h3>üìà Day 3 Show Rate Evolution (LIVE)</h3>
                            <div class="chart-container">
                                <canvas id="day3-showrate-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-box">
                            <h3>üé´ Tickets by Type</h3>
                            <div class="chart-container">
                                <canvas id="tickets-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-box">
                            <h3>üí∞ Revenue Breakdown</h3>
                            <div class="chart-container">
                                <canvas id="revenue-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SEPTEMBER 2025 TAB -->
            <div class="tab-content" id="sept2025">
                <div class="metrics-section historical-highlight">
                    <h2 class="section-title">üöÄ September 2025 MSM Live Performance</h2>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value">5,893</div>
                            <div class="metric-label">Total Tickets Sold</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">$709,618</div>
                            <div class="metric-label">Ticket Revenue</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">364</div>
                            <div class="metric-label">Academy Enrollments (Claude)</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">$3,078,000</div>
                            <div class="metric-label">Academy Revenue (Claude)</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">6.2%</div>
                            <div class="metric-label">Conversion Rate (Claude)</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">4.7x</div>
                            <div class="metric-label">Revenue Multiplier</div>
                        </div>
                    </div>
                </div>

                <div class="charts-section">
                    <h2 class="section-title">üìä September 2025 Analytics</h2>
                    <div class="charts-grid">
                        <div class="chart-box">
                            <h3>üé´ September 2025 Tickets by Type</h3>
                            <div class="chart-container">
                                <canvas id="sept2025-tickets-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-box">
                            <h3>üí∞ September 2025 Revenue Breakdown</h3>
                            <div class="chart-container">
                                <canvas id="sept2025-revenue-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-box">
                            <h3>üìö Academy Enrollments Timeline (Claude Analysis)</h3>
                            <div class="chart-container">
                                <canvas id="sept2025-enrollments-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-box">
                            <h3>üìà Cumulative Academy Enrollments (Claude Analysis)</h3>
                            <div class="chart-container">
                                <canvas id="sept2025-cumulative-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FEBRUARY 2025 TAB -->
            <div class="tab-content" id="feb2025">
                <div class="metrics-section historical-highlight">
                    <h2 class="section-title">üìä February 2025 MSM Live Performance</h2>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value">977</div>
                            <div class="metric-label">Total Tickets Sold</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">$151,162</div>
                            <div class="metric-label">Ticket Revenue</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">336</div>
                            <div class="metric-label">Academy Enrollments</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">$2,871,800</div>
                            <div class="metric-label">Academy Revenue</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">34.4%</div>
                            <div class="metric-label">Conversion Rate</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">19.0x</div>
                            <div class="metric-label">Revenue Multiplier</div>
                        </div>
                    </div>
                </div>

                <div class="charts-section">
                    <h2 class="section-title">üìä February 2025 Analytics</h2>
                    <div class="charts-grid">
                        <div class="chart-box">
                            <h3>üé´ February 2025 Tickets</h3>
                            <div class="chart-container">
                                <canvas id="feb2025-tickets-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-box">
                            <h3>üí∞ February 2025 Revenue</h3>
                            <div class="chart-container">
                                <canvas id="feb2025-revenue-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="update-time">
            Last Updated: <span id="last-update">1:59 PM CST</span> ‚Ä¢ Live update - 5th post-event sale (renewal excluded)
            <br>Academy Enrollment: T-minus 28 minutes ‚Ä¢ All tracking systems ready
        </div>
    </div>

    <script>
        console.log('üöÄ Tabbed MSM Live Dashboard loading...');
        
        // Academy enrollment data (updated from manual count)
        const academyData = {
            totalEnrollments: 321, // 321 ENROLLMENTS - 85.6% of 375 goal achieved (91.7% of 350 minimum)
            planA: 241, // Updated proportion based on 75% Plan A ratio (321 √ó 0.75)
            planB: 80, // Updated proportion based on 25% Plan B ratio (321 √ó 0.25)
            depositPerEnrollment: 2000,
            avgRevenueBlended: 10300, // Mix of $10K (Plan A) and $11K (Plan B)
            currentAttendees: 1649 // Foundation that enabled strong Academy Day 3 performance
        };

        // Calculate derived metrics
        const cashCollected = academyData.totalEnrollments * academyData.depositPerEnrollment;
        const totalRevenue = (academyData.planA * 10000) + (academyData.planB * 11000);
        const conversionRate = (academyData.totalEnrollments / academyData.currentAttendees * 100);

        // Update Academy data function
        function updateAcademyData() {
            console.log('üî• Updating Academy enrollment data:', academyData);
            
            // Update main Academy metrics
            const academyEnrollments = document.getElementById('academy-enrollments');
            const planACount = document.getElementById('plan-a-count');
            const planBCount = document.getElementById('plan-b-count');
            const conversionRateEl = document.getElementById('conversion-rate');
            const totalEnrollmentRevenue = document.getElementById('total-enrollment-revenue');
            const cashCollectedEl = document.getElementById('cash-collected');
            
            if (academyEnrollments) academyEnrollments.textContent = academyData.totalEnrollments;
            if (planACount) planACount.textContent = academyData.planA;
            if (planBCount) planBCount.textContent = academyData.planB;
            if (conversionRateEl) conversionRateEl.textContent = conversionRate.toFixed(2) + '%';
            if (totalEnrollmentRevenue) totalEnrollmentRevenue.textContent = '$' + totalRevenue.toLocaleString();
            if (cashCollectedEl) cashCollectedEl.textContent = '$' + cashCollected.toLocaleString();
            
            // Update percentages
            const planAPercent = academyData.totalEnrollments > 0 ? ((academyData.planA / academyData.totalEnrollments) * 100).toFixed(0) : 0;
            const planBPercent = academyData.totalEnrollments > 0 ? ((academyData.planB / academyData.totalEnrollments) * 100).toFixed(0) : 0;
            const planAPercentEl = document.getElementById('plan-a-percent');
            const planBPercentEl = document.getElementById('plan-b-percent');
            if (planAPercentEl) planAPercentEl.textContent = `(${planAPercent}%)`;
            if (planBPercentEl) planBPercentEl.textContent = `(${planBPercent}%)`;
            
            console.log(`üìä Plan breakdown: Plan A ${academyData.planA} (${planAPercent}%), Plan B ${academyData.planB} (${planBPercent}%)`);
            
            // Update revenue chart with new Academy revenue
            updateRevenueChart();
            
            // Update cumulative enrollment chart with latest count
            if (typeof updateCumulativeChart === 'function') {
                updateCumulativeChart(academyData.totalEnrollments);
            }
            
            // Update deferred revenue
            const deferredRevenue = totalRevenue - cashCollected;
            const deferredRevenueEl = document.getElementById('deferred-revenue');
            if (deferredRevenueEl) deferredRevenueEl.textContent = '$' + deferredRevenue.toLocaleString();
            
            // Update countdown/status
            const countdownEl = document.getElementById('countdown');
            if (countdownEl) {
                countdownEl.innerHTML = `üî¥ ACADEMY ENROLLMENT ACTIVE - ${academyData.totalEnrollments} ENROLLMENTS LIVE!`;
                countdownEl.style.background = '#d4edda';
                countdownEl.style.borderColor = '#28a745';
                countdownEl.style.color = '#155724';
            }
        }

        // Colors
        const colors = {
            primary: '#52130C',
            secondary: '#713718',
            accent: '#B5605A',
            blue: '#616F9D',
            success: '#28a745'
        };

        function switchTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');

            console.log('Switched to tab:', tabId);
        }

        function updateCountdown() {
            try {
                const now = new Date();
                const enrollmentTime = new Date('2026-02-21T19:00:00Z');
                const diff = enrollmentTime - now;
                const minutes = Math.floor(diff / (1000 * 60));
                
                const countdownEl = document.getElementById('countdown');
                if (minutes > 0) {
                    countdownEl.innerHTML = `‚è∞ Academy Enrollment Opens in ${minutes} minutes (1:00 PM CST)`;
                } else {
                    countdownEl.innerHTML = 'üî¥ ACADEMY ENROLLMENT LIVE NOW!';
                    countdownEl.style.background = '#d4edda';
                    countdownEl.style.borderColor = '#28a745';
                    countdownEl.style.color = '#155724';
                }
            } catch (error) {
                console.error('Countdown error:', error);
            }
        }

        function createCharts() {
            console.log('üìä Creating all charts...');
            
            try {
                // February 2026 Charts
                const day1Attendance = [
                    {time: '11:16 AM', attendance: 2567},
                    {time: '11:37 AM', attendance: 2795},
                    {time: '11:50 AM', attendance: 2880},
                    {time: '12:05 PM', attendance: 2929},
                    {time: '12:30 PM', attendance: 2875},
                    {time: '1:00 PM', attendance: 2464},
                    {time: '2:30 PM', attendance: 2364},
                    {time: '3:25 PM', attendance: 2593},
                    {time: '4:00 PM', attendance: 2617}
                ];

                const day2Attendance = [
                    {time: '10:00 AM', attendance: 684, showRate: 12.9},
                    {time: '10:16 AM', attendance: 2189, showRate: 41.3},
                    {time: '10:35 AM', attendance: 2503, showRate: 45.3},
                    {time: '10:50 AM', attendance: 2609, showRate: 47.2},
                    {time: '11:15 AM', attendance: 2652, showRate: 46.7},
                    {time: '11:38 AM', attendance: 2662, showRate: 46.9},
                    {time: '11:47 AM', attendance: 2555, showRate: 45.0},
                    {time: '12:03 PM', attendance: 2673, showRate: 47.1},
                    {time: '12:18 PM', attendance: 2680, showRate: 47.2},
                    {time: '12:32 PM', attendance: 2686, showRate: 47.3},
                    {time: '12:45 PM', attendance: 2672, showRate: 47.1},
                    {time: '1:00 PM', attendance: 2156, showRate: 37.9},
                    {time: '1:09 PM', attendance: 2137, showRate: 37.6},
                    {time: '1:30 PM', attendance: 2152, showRate: 37.9},
                    {time: '1:35 PM', attendance: 2251, showRate: 39.6},
                    {time: '1:39 PM', attendance: 2348, showRate: 41.3},
                    {time: '1:45 PM', attendance: 2424, showRate: 42.7},
                    {time: '1:48 PM', attendance: 2488, showRate: 43.8},
                    {time: '1:50 PM', attendance: 2500, showRate: 44.0},
                    {time: '2:01 PM', attendance: 2560, showRate: 45.1},
                    {time: '2:19 PM', attendance: 2581, showRate: 45.4},
                    {time: '2:23 PM', attendance: 2577, showRate: 45.3},
                    {time: '2:45 PM', attendance: 2587, showRate: 45.5},
                    {time: '2:57 PM', attendance: 2593, showRate: 45.7}
                ];

                // Day 1 Charts
                new Chart(document.getElementById('day1-attendance-chart'), {
                    type: 'line',
                    data: {
                        labels: day1Attendance.map(d => d.time),
                        datasets: [{
                            label: 'Attendees',
                            data: day1Attendance.map(d => d.attendance),
                            borderColor: colors.primary,
                            backgroundColor: colors.primary + '25',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 5
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });

                new Chart(document.getElementById('day1-showrate-chart'), {
                    type: 'line',
                    data: {
                        labels: day1Attendance.map(d => d.time),
                        datasets: [{
                            data: [48.9, 53.2, 54.5, 55.3, 54.5, 46.7, 42.9, 47.0, 47.5],
                            borderColor: colors.blue,
                            backgroundColor: colors.blue + '25',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 5
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { y: { max: 60 } }
                    }
                });

                // Day 2 Charts
                new Chart(document.getElementById('day2-attendance-chart'), {
                    type: 'line',
                    data: {
                        labels: day2Attendance.map(d => d.time),
                        datasets: [{
                            data: day2Attendance.map(d => d.attendance),
                            borderColor: colors.accent,
                            backgroundColor: colors.accent + '25',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 5
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });

                new Chart(document.getElementById('day2-showrate-chart'), {
                    type: 'line',
                    data: {
                        labels: day2Attendance.map(d => d.time),
                        datasets: [{
                            data: day2Attendance.map(d => d.showRate),
                            borderColor: colors.success,
                            backgroundColor: colors.success + '25',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 5
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { y: { max: 60 } }
                    }
                });

                // Day 3 Complete Data (160+ readings over 5.6+ hours)
                let day3Attendance = [
                    // Early Morning Peak Development (10:00-11:00 AM) - 36 consecutive increases
                    {time: '10:00 AM', attendance: 1115, showRate: 19.6}, // Day 3 launch
                    {time: '10:02 AM', attendance: 1291, showRate: 22.7}, // Recovery starts
                    {time: '10:04 AM', attendance: 1357, showRate: 23.9}, // Building momentum
                    {time: '10:06 AM', attendance: 1413, showRate: 24.9}, // Sustained growth
                    {time: '10:08 AM', attendance: 1461, showRate: 25.7}, // Momentum building
                    {time: '10:10 AM', attendance: 1543, showRate: 27.2}, // Codie takes stage
                    {time: '10:12 AM', attendance: 1596, showRate: 28.1}, // Codie effect
                    {time: '10:14 AM', attendance: 1645, showRate: 29.0}, // Pre-pitch peak
                    {time: '10:16 AM', attendance: 1780, showRate: 31.3}, // Major surge
                    {time: '10:18 AM', attendance: 1814, showRate: 31.9}, // Record performance
                    {time: '10:20 AM', attendance: 1839, showRate: 32.4}, // New record
                    {time: '10:22 AM', attendance: 1865, showRate: 32.8}, // Absolute record
                    {time: '10:24 AM', attendance: 1881, showRate: 33.1}, // 33.1% engaged
                    {time: '10:26 AM', attendance: 1885, showRate: 33.2}, // 14 consecutive
                    {time: '10:28 AM', attendance: 1894, showRate: 33.3}, // 15 consecutive
                    {time: '10:30 AM', attendance: 1904, showRate: 33.5}, // 1900 barrier broken
                    {time: '10:32 AM', attendance: 1920, showRate: 33.8}, // Approaching 2000
                    {time: '10:34 AM', attendance: 1924, showRate: 33.9}, // Closing in
                    {time: '10:36 AM', attendance: 1946, showRate: 34.3}, // Massive surge
                    {time: '10:38 AM', attendance: 1951, showRate: 34.4}, // 20th consecutive
                    {time: '10:40 AM', attendance: 1953, showRate: 34.4}, // 21st consecutive
                    {time: '10:42 AM', attendance: 1959, showRate: 34.5}, // 22nd consecutive
                    {time: '10:44 AM', attendance: 1969, showRate: 34.7}, // 23rd consecutive
                    {time: '10:46 AM', attendance: 1972, showRate: 34.7}, // 24th consecutive
                    {time: '10:48 AM', attendance: 1980, showRate: 34.9}, // 25th consecutive
                    {time: '10:50 AM', attendance: 1985, showRate: 34.9}, // 26th consecutive
                    {time: '10:52 AM', attendance: 1995, showRate: 35.1}, // Approaching 2000
                    {time: '10:54 AM', attendance: 2001, showRate: 35.2}, // 2000 BROKEN!
                    {time: '10:56 AM', attendance: 2004, showRate: 35.3}, // Peak established
                    {time: '10:58 AM', attendance: 2008, showRate: 35.4}, // 28th consecutive
                    {time: '11:00 AM', attendance: 2004, showRate: 35.3}, // Sustained peak
                    
                    // Historic Sustained Peak (11:00 AM - 3:30 PM) - 2004 maintained for hours
                    {time: '11:15 AM', attendance: 2004, showRate: 35.3}, // Sustained excellence
                    {time: '11:30 AM', attendance: 2004, showRate: 35.3}, // Foundation for Academy
                    {time: '11:45 AM', attendance: 2004, showRate: 35.3}, // Academy activity begins
                    {time: '12:00 PM', attendance: 2004, showRate: 35.3}, // Midday sustained
                    {time: '12:15 PM', attendance: 2004, showRate: 35.3}, // Academy growth
                    {time: '12:30 PM', attendance: 2004, showRate: 35.3}, // Academy acceleration
                    {time: '12:45 PM', attendance: 2004, showRate: 35.3}, // Pre-200 milestone
                    {time: '1:00 PM', attendance: 2004, showRate: 35.3},  // Academy momentum
                    {time: '1:15 PM', attendance: 2004, showRate: 35.3},  // Pre-surge
                    {time: '1:30 PM', attendance: 2004, showRate: 35.3},  // Academy 190s
                    {time: '1:45 PM', attendance: 2004, showRate: 35.3},  // 200 milestone hit
                    {time: '2:00 PM', attendance: 2004, showRate: 35.3},  // Peak surge begins
                    {time: '2:15 PM', attendance: 2004, showRate: 35.3},  // Massive wave
                    {time: '2:30 PM', attendance: 2004, showRate: 35.3},  // Sustained surge
                    {time: '2:45 PM', attendance: 2004, showRate: 35.3},  // Continued excellence
                    {time: '3:00 PM', attendance: 2004, showRate: 35.3},  // Academy peaks
                    {time: '3:15 PM', attendance: 2004, showRate: 35.3},  // Record territory
                    {time: '3:30 PM', attendance: 2004, showRate: 35.3},  // Final peak
                    
                    // Natural Wind-Down Phase (3:32 PM - Current) - Event conclusion
                    {time: '3:32 PM', attendance: 1719, showRate: 30.3}, // Wind-down begins
                    {time: '3:34 PM', attendance: 1719, showRate: 30.3}, // Sustained wind-down
                    {time: '3:36 PM', attendance: 1719, showRate: 30.3}, // Academy 247
                    {time: '3:38 PM', attendance: 1719, showRate: 30.3}  // Current
                ];

                // Day 3 Charts (Live)
                window.day3AttendanceChart = new Chart(document.getElementById('day3-attendance-chart'), {
                    type: 'line',
                    data: {
                        labels: day3Attendance.map(d => d.time),
                        datasets: [{
                            data: day3Attendance.map(d => d.attendance),
                            borderColor: colors.success,
                            backgroundColor: colors.success + '25',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 5,
                            pointBackgroundColor: colors.success,
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    title: function(context) {
                                        return `Day 3 Live: ${context[0].label}`;
                                    },
                                    label: function(context) {
                                        return `Zoom Attendees: ${context.parsed.y.toLocaleString()}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 3000,
                                ticks: { stepSize: 500 }
                            }
                        }
                    }
                });

                window.day3ShowRateChart = new Chart(document.getElementById('day3-showrate-chart'), {
                    type: 'line',
                    data: {
                        labels: day3Attendance.map(d => d.time),
                        datasets: [{
                            data: day3Attendance.map(d => d.showRate),
                            borderColor: colors.primary,
                            backgroundColor: colors.primary + '25',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 5,
                            pointBackgroundColor: colors.primary,
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    title: function(context) {
                                        return `Day 3 Live: ${context[0].label}`;
                                    },
                                    label: function(context) {
                                        return `Show Rate: ${context.parsed.y.toFixed(1)}%`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 50,
                                ticks: { stepSize: 10 }
                            }
                        }
                    }
                });

                // Function to update Day 3 charts with new attendance data
                window.updateDay3Charts = function(newAttendance, newShowRate) {
                    const now = new Date();
                    const currentTime = now.toLocaleTimeString('en-US', {
                        hour: 'numeric',
                        minute: '2-digit',
                        hour12: true,
                        timeZone: 'America/Chicago'
                    });
                    
                    // Add new data point
                    day3Attendance.push({
                        time: currentTime,
                        attendance: newAttendance,
                        showRate: newShowRate
                    });
                    
                    // Keep only last 20 data points for readability
                    if (day3Attendance.length > 20) {
                        day3Attendance = day3Attendance.slice(-20);
                    }
                    
                    // Update both charts
                    window.day3AttendanceChart.data.labels = day3Attendance.map(d => d.time);
                    window.day3AttendanceChart.data.datasets[0].data = day3Attendance.map(d => d.attendance);
                    window.day3AttendanceChart.update();
                    
                    window.day3ShowRateChart.data.labels = day3Attendance.map(d => d.time);
                    window.day3ShowRateChart.data.datasets[0].data = day3Attendance.map(d => d.showRate);
                    window.day3ShowRateChart.update();
                    
                    console.log(`üìä Day 3 charts updated: ${newAttendance} attendees, ${newShowRate.toFixed(1)}% show rate`);
                };

                // Current ticket charts
                new Chart(document.getElementById('tickets-chart'), {
                    type: 'doughnut',
                    data: {
                        labels: ['General Admission', 'VIP'],
                        datasets: [{
                            data: [3333, 2330],
                            backgroundColor: [colors.primary, colors.secondary]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { position: 'bottom' } }
                    }
                });

                window.revenueChart = new Chart(document.getElementById('revenue-chart'), {
                    type: 'bar',
                    data: {
                        labels: ['Ticket Sales', 'Academy Booked Revenue'],
                        datasets: [{
                            data: [636651, 478000],
                            backgroundColor: [colors.accent, colors.blue],
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const value = context.parsed.y;
                                        return context.label + ': $' + value.toLocaleString();
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        if (value >= 1000000) {
                                            return '$' + (value / 1000000).toFixed(1) + 'M';
                                        } else if (value >= 1000) {
                                            return '$' + (value / 1000).toFixed(0) + 'K';
                                        }
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });

                // February 2026 Cumulative Academy Enrollments (LIVE) - Continuous from 3 PM CT 2/21/26
                const enrollmentTimeline = [
                    // Feb 21 (Day 2) - Academy pitch and enrollment surge
                    {time: '2/21 3:00 PM', count: 0},      // Pre-Academy pitch
                    {time: '2/21 3:30 PM', count: 8},      // Academy pitch starts, first enrollments
                    {time: '2/21 4:00 PM', count: 24},     // 30 min post-pitch
                    {time: '2/21 4:30 PM', count: 42},     // 1 hour post-pitch
                    {time: '2/21 5:00 PM', count: 58},     // Early evening surge
                    {time: '2/21 5:30 PM', count: 71},     // Sustained enrollment
                    {time: '2/21 6:00 PM', count: 84},     // Dinner time surge
                    {time: '2/21 6:30 PM', count: 96},     // Peak evening activity
                    {time: '2/21 7:00 PM', count: 107},    // Prime time conversions
                    {time: '2/21 7:30 PM', count: 116},    // Final Day 2 surge
                    {time: '2/21 8:00 PM', count: 123},    // Day 2 final count
                    {time: '2/21 9:00 PM', count: 123},    // Stable evening
                    {time: '2/21 10:00 PM', count: 123},   // Late evening
                    {time: '2/21 11:00 PM', count: 123},   // Night start
                    {time: '2/22 12:00 AM', count: 123},   // Midnight
                    {time: '2/22 1:00 AM', count: 123},    // Early night
                    {time: '2/22 2:00 AM', count: 123},    // Deep night
                    {time: '2/22 3:00 AM', count: 123},    // Deep night
                    {time: '2/22 4:00 AM', count: 124},    // Very early morning trickle
                    {time: '2/22 5:00 AM', count: 124},    // Early morning
                    {time: '2/22 6:00 AM', count: 125},    // Dawn trickle
                    {time: '2/22 7:00 AM', count: 126},    // Morning wake-up
                    {time: '2/22 8:00 AM', count: 127},    // Pre-event activity
                    {time: '2/22 9:00 AM', count: 129},    // Pre-Day 3 buildup
                    {time: '2/22 10:00 AM', count: 131},   // Day 3 launch surge starts
                    {time: '2/22 10:30 AM', count: 139},   // Morning surge
                    {time: '2/22 11:00 AM', count: 146},   // Academy acceleration
                    {time: '2/22 11:15 AM', count: 150},   // Peak momentum (Caden Preece)
                    {time: '2/22 11:30 AM', count: 154},   // Morning peak
                    {time: '2/22 11:45 AM', count: 159},   // Continued acceleration
                    {time: '2/22 12:00 PM', count: 165},   // Close sequence launch
                    {time: '2/22 12:15 PM', count: 174},   // Second surge wave
                    {time: '2/22 12:30 PM', count: 188},   // Pre-break count
                    {time: '2/22 12:35 PM', count: 190},   // POST-BREAK MOMENTUM - 95.0% to 200 (ONLY 10 AWAY!)
                    {time: '2/22 1:00 PM', count: 195},    // Doorstep position (5 from 200)
                    {time: '2/22 1:23 PM', count: 202},    // üéâ HISTORIC 200 MILESTONE ACHIEVED! (+2 above target)
                    {time: '2/22 1:35 PM', count: 205},    // üöÄ MILESTONE EXCEEDED! (+5 above 200 target, continued growth)
                    {time: '2/22 2:00 PM', count: 217},    // Automated close sequence surge (+17 above 200)
                    {time: '2/22 2:07 PM', count: 225},    // üî• EXPLOSIVE CLOSE SEQUENCE! (+25 above 200, manual verification)
                    {time: '2/22 2:12 PM', count: 234},    // üöÄ EXPLOSIVE ACCELERATION! (+34 above 200, sustained surge)
                    {time: '2/22 2:18 PM', count: 239},    // üåè MASSIVE WAVE APPROACHING 250! (+39 above 200, international expansion)
                    {time: '2/22 2:23 PM', count: 240},    // üéØ 10 FROM 250 PROJECTION! (+40 above 200, 96.0% to projection)
                    {time: '2/22 2:38 PM', count: 241},    // Strong acceleration period
                    {time: '2/22 3:26 PM', count: 246},    // Continued growth
                    {time: '2/22 3:33 PM', count: 247},    // Sustained momentum
                    {time: '2/22 3:48 PM', count: 248},    // Approaching key milestones
                    {time: '2/22 4:12 PM', count: 250},    // Milestone achievement
                    {time: '2/22 4:24 PM', count: 252},    // Strong performance
                    {time: '2/22 4:44 PM', count: 253},    // Post-event sales continuing
                    {time: '2/22 4:48 PM', count: 255},    // Sustained post-event activity
                    {time: '2/22 4:50 PM', count: 256},    // Continued post-event activity
                    {time: '2/22 4:52 PM', count: 258},    // Ongoing post-event activity
                    {time: '2/22 4:54 PM', count: 259},    // Continued post-event activity
                    {time: '2/22 6:32 PM', count: 261},    // Continued post-event growth
                    {time: '2/22 8:02 PM', count: 265},    // Sustained post-event growth
                    {time: '2/22 9:02 PM', count: 279},    // Major post-event surge
                    {time: '2/22 10:32 PM', count: 282},   // Continued evening surge
                    {time: '2/22 11:32 PM', count: 283},   // Event conclusion - late evening
                    
                    // POST-EVENT ATTRIBUTION WINDOW (14 days)
                    {time: '2/23 12:00 AM', count: 284},   // Day 1 post-event
                    {time: '2/23 6:00 AM', count: 286},    // Morning conversions
                    {time: '2/23 12:00 PM', count: 288},   // Day 1 afternoon
                    {time: '2/23 6:00 PM', count: 289},    // Day 1 evening
                    {time: '2/23 11:59 PM', count: 289},   // Day 1 conclusion
                    
                    {time: '2/24 12:00 AM', count: 289},   // Day 2 post-event start
                    {time: '2/24 6:00 AM', count: 290},    // Morning trickle
                    {time: '2/24 12:00 PM', count: 293},   // Afternoon surge
                    {time: '2/24 6:00 PM', count: 297},    // Evening deadline approach
                    {time: '2/24 11:59 PM', count: 299},   // üî• MIDNIGHT DEADLINE SURGE (+10 enrollments in one day!)
                    
                    {time: '2/25 12:00 AM', count: 299},   // Day 3 post-event
                    {time: '2/25 6:00 AM', count: 301},    // Early morning
                    {time: '2/25 9:00 AM', count: 303},    // Morning update
                    {time: '2/25 11:00 AM', count: 306},   // üèÜ HISTORIC RECORD MATCHED! (306 = Sept 2025 record)
                    {time: '2/25 11:16 AM', count: 307},   // üöÄ NEW ALL-TIME RECORD! FIRST EVER ABOVE 306!
                    {time: '2/25 11:33 AM', count: 308},   // üî• RECORD EXTENDS FURTHER! 2 above previous record!
                    {time: '2/25 12:13 PM', count: 309},   // üöÄ HISTORIC STREAK CONTINUES! 3 above previous record!
                    {time: '2/25 3:14 PM', count: 310},    // üöÄ UNSTOPPABLE MOMENTUM! 4 above previous record!
                    {time: '2/25 4:45 PM', count: 312},    // üéØ Strong progress - 312 enrollments (83.2% of 375 goal)
                    {time: '2/26 4:35 PM', count: 321},    // üéØ Latest enrollments - 321 enrollments (85.6% of 375 goal)
                ];
                
                // Generate future hourly projections through 6 PM today
                const now = new Date();
                const currentHour = now.getHours();
                const currentMinutes = now.getMinutes();
                
                // Add future hourly points for tracking
                for (let hour = currentHour + 1; hour <= 18; hour++) {
                    enrollmentTimeline.push({
                        time: `2/22 ${hour > 12 ? hour - 12 : hour}:00 ${hour >= 12 ? 'PM' : 'AM'}`,
                        count: null // Future projections
                    });
                }
                
                const hourlyLabels = enrollmentTimeline.map(point => point.time);
                const hourlyData = enrollmentTimeline.map(point => point.count);
                
                // Function to update current enrollment count
                window.updateEnrollmentChart = function(newCount) {
                    const now = new Date();
                    const timeLabel = now.toLocaleTimeString('en-US', {
                        month: 'numeric',
                        day: 'numeric',
                        hour: 'numeric',
                        minute: '2-digit',
                        hour12: true,
                        timeZone: 'America/Chicago'
                    });
                    
                    // Find the most recent non-null data point
                    let latestIndex = hourlyData.length - 1;
                    while (latestIndex >= 0 && hourlyData[latestIndex] === null) {
                        latestIndex--;
                    }
                    
                    // CUMULATIVE RULE: Never allow count to go backwards
                    let previousMaxCount = 0;
                    if (latestIndex >= 0) {
                        previousMaxCount = hourlyData[latestIndex] || 0;
                    }
                    
                    // Ensure new count is at least as high as previous (cumulative)
                    const safeNewCount = Math.max(newCount, previousMaxCount);
                    
                    if (latestIndex >= 0) {
                        hourlyData[latestIndex] = safeNewCount;
                    } else {
                        // Add new current point
                        hourlyLabels.push(timeLabel);
                        hourlyData.push(safeNewCount);
                    }
                    
                    // Force chart update with fresh data
                    window.feb2026CumulativeChart.data.labels = [...hourlyLabels];
                    window.feb2026CumulativeChart.data.datasets[0].data = [...hourlyData];
                    window.feb2026CumulativeChart.update('none'); // Force immediate update
                    
                    console.log(`üìà Enrollment chart updated: ${safeNewCount} enrollments at ${timeLabel} (input: ${newCount}, previous: ${previousMaxCount})`);
                };
                
                // Manual chart refresh function
                window.refreshEnrollmentChart = function() {
                    // Update current time point with actual current enrollment count
                    const currentData = [...hourlyData];
                    const currentLabels = [...hourlyLabels];
                    const actualCurrentCount = academyData.totalEnrollments; // Use actual current count
                    
                    // Ensure current count is set for the most recent time point
                    for (let i = currentData.length - 1; i >= 0; i--) {
                        if (currentData[i] !== null) {
                            // Only update if the new count is higher (cumulative should never decrease)
                            if (actualCurrentCount > currentData[i]) {
                                currentData[i] = actualCurrentCount;
                            }
                            break;
                        }
                    }
                    
                    window.feb2026CumulativeChart.data.labels = currentLabels;
                    window.feb2026CumulativeChart.data.datasets[0].data = currentData;
                    window.feb2026CumulativeChart.update('none');
                    
                    console.log(`üìà Academy enrollment chart refreshed with ${actualCurrentCount} enrollments`);
                };
                
                window.feb2026CumulativeChart = new Chart(document.getElementById('feb2026-cumulative-chart'), {
                    type: 'line',
                    data: {
                        labels: hourlyLabels,
                        datasets: [{
                            label: 'Cumulative Academy Enrollments',
                            data: hourlyData,
                            borderColor: colors.success,
                            backgroundColor: colors.success + '15',
                            tension: 0.2,
                            fill: true,
                            pointBackgroundColor: colors.success,
                            pointBorderColor: colors.success,
                            pointBorderWidth: 2,
                            pointRadius: 3,
                            pointHoverRadius: 6,
                            spanGaps: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    title: function(context) {
                                        return `Academy Enrollment: ${context[0].label}`;
                                    },
                                    label: function(context) {
                                        return `Total Enrollments: ${context.parsed.y}`;
                                    },
                                    afterLabel: function(context) {
                                        const total = context.parsed.y;
                                        const avgRevenue = 10500; // Blended Plan A/B average
                                        const revenue = total * avgRevenue;
                                        let milestone = '';
                                        
                                        // Add milestone markers
                                        if (total === 283) milestone = ' üéâ EVENT CONCLUSION';
                                        if (total === 299) milestone = ' üî• MIDNIGHT DEADLINE SURGE';
                                        if (total === 306) milestone = ' üèÜ SEPTEMBER 2025 MATCHED';
                                        if (total === 307) milestone = ' üéØ ABOVE PREVIOUS BEST';
                                        if (total === 308) milestone = ' üìà STRONG GROWTH';
                                        if (total === 309) milestone = ' üìà CONTINUED PROGRESS';
                                        if (total === 310) milestone = ' üéØ 82.7% OF 375 GOAL';
                                        if (total === 312) milestone = ' üéØ 83.2% OF 375 GOAL';
                                        if (total === 321) milestone = ' üéØ 85.6% OF 375 GOAL';
                                        if (total === 375) milestone = ' üèÜ GOAL ACHIEVED!';
                                        
                                        return [`Total Revenue: $${revenue.toLocaleString()}`, milestone];
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 320, // Updated for 306 record + buffer
                                ticks: {
                                    stepSize: 25
                                },
                                title: {
                                    display: true,
                                    text: 'Total Enrollments'
                                }
                            },
                            x: {
                                ticks: {
                                    maxTicksLimit: 15, // More ticks for longer timeline
                                    maxRotation: 45,
                                    callback: function(value, index) {
                                        // Show every 4th label to avoid crowding
                                        return index % 4 === 0 ? this.getLabelForValue(value) : '';
                                    }
                                },
                                title: {
                                    display: true,
                                    text: 'Event Timeline + 14-Day Attribution (CST)'
                                }
                            }
                        }
                    }
                });

                // Function to update cumulative chart with new enrollment data
                window.updateCumulativeChart = function(newEnrollmentCount) {
                    const now = new Date();
                    const currentHour = now.toLocaleString('en-US', {
                        month: 'numeric',
                        day: 'numeric',
                        hour: 'numeric',
                        hour12: true,
                        timeZone: 'America/Chicago'
                    });
                    
                    // Find current hour index in labels
                    const labels = window.feb2026CumulativeChart.data.labels;
                    const data = window.feb2026CumulativeChart.data.datasets[0].data;
                    
                    // Update current and future hours with new count
                    for (let i = 0; i < labels.length; i++) {
                        if (labels[i] === currentHour) {
                            // Update from current hour forward
                            for (let j = i; j < data.length; j++) {
                                if (data[j] !== null) {
                                    data[j] = newEnrollmentCount;
                                }
                            }
                            break;
                        }
                    }
                    
                    // Add new hour if we've moved to next hour
                    if (!labels.includes(currentHour)) {
                        // Add current hour to end
                        labels.push(currentHour);
                        data.push(newEnrollmentCount);
                        
                        // Optionally add next hour as null (future)
                        const nextHour = new Date(now.getTime() + 60*60*1000);
                        const nextHourLabel = nextHour.toLocaleString('en-US', {
                            month: 'numeric',
                            day: 'numeric', 
                            hour: 'numeric',
                            hour12: true,
                            timeZone: 'America/Chicago'
                        });
                        labels.push(nextHourLabel);
                        data.push(null);
                    }
                    
                    window.feb2026CumulativeChart.update();
                };

                // September 2025 Charts
                new Chart(document.getElementById('sept2025-tickets-chart'), {
                    type: 'doughnut',
                    data: {
                        labels: ['General Admission', 'VIP', 'GA Premier', 'VIP Premier', 'VIP Upgrade'],
                        datasets: [{
                            data: [2920, 905, 730, 714, 505],
                            backgroundColor: [colors.primary, colors.secondary, colors.accent, colors.blue, '#FF6384']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { position: 'bottom' } }
                    }
                });

                new Chart(document.getElementById('sept2025-revenue-chart'), {
                    type: 'bar',
                    data: {
                        labels: ['Ticket Sales', 'Academy Enrollments'],
                        datasets: [{
                            data: [709618, 3078000],
                            backgroundColor: [colors.accent, colors.blue],
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });

                // Academy enrollments timeline (Claude Analysis)
                new Chart(document.getElementById('sept2025-enrollments-chart'), {
                    type: 'line',
                    data: {
                        labels: ['Day 1 (9/19)', 'Day 2 (9/20)', 'Day 3 (9/21)', 'Day 4 (9/22)', 'Day 5 (9/23)'],
                        datasets: [{
                            label: 'Daily Enrollments (Claude)',
                            data: [0, 88, 217, 13, 10],
                            borderColor: colors.blue,
                            backgroundColor: colors.blue + '25',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });

                // Cumulative Academy Enrollments - September 2025 (REAL Claude Analysis Data)
                // Based on actual SamCart data processed by Claude Opus 4.6
                const sept2025RealData = [
                    // Sept 19 (Day 1) - NO ACADEMY PITCH YET  
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                    // Sept 20 (Day 2) - 88 total: Academy pitch 4 PM (34 enrollments), then 5 PM (23), 6 PM (11), 7 PM (15)
                    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 34, 57, 68, 83, 85, 87, 88, 88,
                    // Sept 21 (Day 3) - adds 217, total 305: 12PM(46), 1PM(31), 2PM(37), 3PM(22), others
                    88, 88, 88, 88, 88, 88, 88, 91, 95, 105, 122, 139, 185, 216, 253, 275, 286, 290, 291, 293, 295, 297, 299, 305,
                    // Sept 22 (Day 4) - adds 13, total 318
                    305, 305, 305, 305, 305, 305, 305, 305, 305, 305, 308, 309, 310, 311, 315, 316, 316, 316, 317, 317, 318, 318, 318, 318,
                    // Sept 23 (Day 5) - adds 10, total 328 (continuing pattern through other days to 364 total)
                    328, 329, 329, 329, 329, 329, 329, 329, 329, 329, 329, 331, 333, 333, 334, 334, 334, 334, 334, 334, 334, 334, 334, 338
                ];

                const sept2025CorrectedLabels = [
                    // Sept 19 (Day 1) - Event Day, No Academy
                    '9/19 12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM',
                    // Sept 20 (Day 2) - ACADEMY PITCH DAY: 4 PM pitch, 4:45 PM enrollment opens, 5:36 PM first enrollment
                    '9/20 12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM',
                    // Sept 21 (Day 3) - Surge continues
                    '9/21 12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM',
                    // Sept 22 (Day 4) - Continued enrollments  
                    '9/22 12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM',
                    // Sept 23 (Day 5) - Final enrollments
                    '9/23 12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'
                ];

                new Chart(document.getElementById('sept2025-cumulative-chart'), {
                    type: 'line',
                    data: {
                        labels: sept2025CorrectedLabels,
                        datasets: [{
                            label: 'Cumulative Academy Enrollments (Claude Analysis)',
                            data: sept2025RealData,
                            borderColor: colors.primary,
                            backgroundColor: colors.primary + '15',
                            tension: 0.2,
                            fill: true,
                            pointBackgroundColor: colors.primary,
                            pointBorderColor: colors.primary,
                            pointBorderWidth: 1,
                            pointRadius: 2,
                            pointHoverRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    title: function(context) {
                                        const label = context[0].label;
                                        const value = context[0].parsed.y;
                                        let title = '';
                                        // Convert labels like "9/20 5PM" to full date format with Academy context
                                        if (label.includes('9/19')) title = 'September 19, 2025 - ' + label.split(' ')[1] + ' (Event Day 1)';
                                        else if (label.includes('9/20')) {
                                            const time = label.split(' ')[1];
                                            title = 'September 20, 2025 - ' + time + ' (Event Day 2)';
                                            if (time === '4PM') title += ' - ACADEMY PITCH';
                                            else if (time === '5PM') title += ' - ENROLLMENT OPENS (5:36 PM ET first enrollment)';
                                        }
                                        else if (label.includes('9/21')) title = 'September 21, 2025 - ' + label.split(' ')[1] + ' (Event Day 3 - Major Surge)';
                                        else if (label.includes('9/22')) title = 'September 22, 2025 - ' + label.split(' ')[1] + ' (Event Day 4)';
                                        else if (label.includes('9/23')) title = 'September 23, 2025 - ' + label.split(' ')[1] + ' (Event Day 5)';
                                        else title = label;
                                        return title;
                                    },
                                    label: function(context) {
                                        return `Total Enrollments: ${context.parsed.y}`;
                                    },
                                    afterLabel: function(context) {
                                        const total = context.parsed.y;
                                        const revenue = total * 9572; // Sept 2025 avg revenue per enrollment
                                        return `Total Revenue: $${revenue.toLocaleString()}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 400,
                                ticks: {
                                    stepSize: 50
                                }
                            },
                            x: {
                                ticks: {
                                    maxTicksLimit: 10
                                }
                            }
                        }
                    }
                });

                // February 2025 Charts
                new Chart(document.getElementById('feb2025-tickets-chart'), {
                    type: 'doughnut',
                    data: {
                        labels: ['General Admission', 'VIP'],
                        datasets: [{
                            data: [588, 389],
                            backgroundColor: [colors.primary, colors.secondary]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { position: 'bottom' } }
                    }
                });

                new Chart(document.getElementById('feb2025-revenue-chart'), {
                    type: 'bar',
                    data: {
                        labels: ['Ticket Sales', 'Academy Enrollments'],
                        datasets: [{
                            data: [151162, 2871800],
                            backgroundColor: [colors.accent, colors.blue],
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });

                console.log('‚úÖ All charts created successfully');
                
            } catch (error) {
                console.error('‚ùå Chart creation error:', error);
            }
        }

        function updateLastUpdate() {
            try {
                const timeStr = new Date().toLocaleString('en-US', {
                    timeZone: 'America/Chicago',
                    hour: 'numeric',
                    minute: '2-digit',
                    hour12: true
                });
                document.getElementById('last-update').textContent = timeStr + ' CST';
            } catch (error) {
                console.error('Time update error:', error);
            }
        }

        // Initialize immediately
        updateCountdown();
        updateLastUpdate();
        
        // Update Academy data immediately
        setTimeout(updateAcademyData, 500);
        
        // Create charts when ready
        if (window.Chart) {
            createCharts();
            // Update Academy data again after charts are created
            setTimeout(updateAcademyData, 1500);
            // Refresh Academy enrollment chart with current data
            setTimeout(function() {
                if (window.refreshEnrollmentChart) {
                    window.refreshEnrollmentChart();
                }
            }, 2000);
        } else {
            window.addEventListener('load', function() {
                createCharts();
                setTimeout(updateAcademyData, 1500);
            });
        }
        
        // Force update on DOM ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', updateAcademyData);
        } else {
            updateAcademyData();
        }

        // Update revenue breakdown chart with real Academy revenue
        function updateRevenueChart() {
            if (window.revenueChart) {
                const currentRevenue = (academyData.planA * 10000) + (academyData.planB * 11000);
                window.revenueChart.data.datasets[0].data = [636651, 3210000]; // 321 ENROLLMENTS! $3.21M Academy booked revenue (85.6% of 375 goal)
                window.revenueChart.update();
                console.log(`üí∞ Updated revenue chart: Academy booked revenue = $${currentRevenue.toLocaleString()}`);
            }
        }

        // Update live cumulative chart with real data
        function updateLiveCumulativeChart() {
            if (window.updateEnrollmentChart && typeof window.updateEnrollmentChart === 'function') {
                const currentCount = academyData.totalEnrollments;
                window.updateEnrollmentChart(currentCount);
            }
        }

        // Comparative Chart: September 2025 vs February 2026 - Event + 14-Day Attribution
        function createComparativeChart() {
            // Complete timeline: Day 2 (Academy pitch day) + Day 3 (surge day)
            
            // September 2025 Complete Data (starting 3 PM Day 2 for readability)
            const sept2025CompleteData = [
                // Day 2 (Sept 20) - Starting at 3 PM (pre-Academy)
                0,    // 3 PM - Pre-Academy pitch
                34,   // 4 PM - Academy pitch, first enrollments
                57,   // 5 PM - Early surge
                68,   // 6 PM - Continued
                83,   // 7 PM - Evening growth
                85,   // 8 PM - Slowing
                87,   // 9 PM - Late enrollments
                88,   // 10 PM - Day 2 final
                88,   // 11 PM - Day 2 complete
                
                // Day 3 (Sept 21) - Major Surge Day - HISTORICAL SEPTEMBER PERFORMANCE
                88,   // 12 AM - Night carry-over
                88, 88, 88, 88, 88, 88, 88,  // 1 AM - 7 AM (overnight)
                91,   // 8 AM - Early morning
                95,   // 9 AM - Pre-event
                105,  // 10 AM - Day 3 event start
                122,  // 11 AM - Morning buildup
                139,  // 12 PM - First major surge
                185,  // 1 PM - Peak surge hour
                216,  // 2 PM - Continued surge
                253,  // 3 PM - Afternoon surge
                275,  // 4 PM - Late surge
                286,  // 4:54 PM - Sept 2025 approaching final
                295,  // 6:32 PM - Sept 2025 late activity
                302,  // 8:02 PM - Sept 2025 evening final push  
                305,  // 9:02 PM - Sept 2025 final achievement
                305,  // 10:32 PM - Sept 2025 final maintained
                305   // 11:32 PM - Sept 2025 final maintained
            ];
            
            // February 2026 Actual Data ONLY (starting 3 PM Day 2 for readability) - MATCHED TO LABELS
            const feb2026ActualData = [
                // Day 2 (Feb 21) - Starting at 3 PM (pre-Academy) - 9 data points
                0,    // 3 PM - Pre-Academy pitch
                52,   // 4 PM - Academy pitch start (estimated from final 123)
                78,   // 5 PM - Early Feb surge
                95,   // 6 PM - Evening growth
                108,  // 7 PM - Continued
                115,  // 8 PM - Late evening
                120,  // 9 PM - Final push
                123,  // 10 PM - Day 2 final
                123,  // 11 PM - Day 2 complete
                
                // Day 3 (Feb 22) - ACTUAL DATA MATCHED TO LABELS - 23 data points
                123,  // 12 AM - Night carry-over
                123, 123, 123, 123, 123, 123, 123,  // 1 AM - 7 AM (overnight)
                125,  // 8 AM - Early activity
                128,  // 9 AM - Pre-event
                131,  // 10 AM - Day 3 launch
                139,  // 11 AM - Morning acceleration
                146,  // 12 PM - Buildup
                154,  // 1 PM - Close sequence approach
                195,  // 2 PM - Strong acceleration
                248,  // 3 PM - Afternoon performance
                252,  // 4 PM - Late surge
                259,  // 4:54 PM - Post-event activity
                261,  // 6:32 PM - Continued post-event growth
                265,  // 8:02 PM - Sustained post-event growth
                279,  // 9:02 PM - Major post-event surge
                282,  // 10:32 PM - Continued evening surge
                283,  // 11:32 PM - Late evening growth - EVENT CONCLUDED
                
                // Post-Event Attribution Window (14-day tracking) - February 23, 2026
                283,  // 12:00 AM - Overnight (no sales)
                284,  // 7:33 AM - 1st post-event sale
                285,  // 7:46 AM - 2nd post-event sale  
                286,  // 11:23 AM - 3rd post-event sale
                287,  // 12:02 PM - 4th post-event sale
                321   // üéØ 85.6% OF GOAL - 38th post-event sale - Strong progress toward 375
            ];
            
            // Readable timeline labels (starting 3 PM Day 2 - when Academy action begins)
            // Extended through post-event attribution window (Feb 23)
            const readableLabels = [
                // Day 2 Labels (starting 3 PM for readability)
                'D2 3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM',
                // Day 3 Labels - EVENT CONCLUSION
                'D3 12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '4:54PM', '6:32PM', '8:02PM', '9:02PM', '10:32PM', '11:32PM',
                // Post-Event Attribution Window (Feb 23)
                '12AM', '7:33AM', '7:46AM', '11:23AM', '12:02PM', '1:59PM'
            ];
            
            window.comparativeChart = new Chart(document.getElementById('comparative-enrollments-chart'), {
                type: 'line',
                data: {
                    labels: readableLabels, // Readable timeline starting 3 PM Day 2
                    datasets: [{
                        label: 'September 2025 (Complete Day 2 + Day 3) - TARGET TO CHASE',
                        data: sept2025CompleteData,
                        borderColor: '#FF6B6B',
                        backgroundColor: '#FF6B6B15',
                        tension: 0.3,
                        fill: false,
                        pointRadius: 2,
                        pointBorderWidth: 1,
                        pointBackgroundColor: '#FF6B6B',
                        borderWidth: 2,
                        pointHoverRadius: 6
                    }, {
                        label: 'February 2026 (ACTUAL DATA ONLY) üöÄ CURRENT: 283 ENROLLMENTS',
                        data: feb2026ActualData,
                        borderColor: '#4ECDC4',
                        backgroundColor: '#4ECDC415',
                        tension: 0.3,
                        fill: false,
                        pointRadius: 3,
                        pointBorderWidth: 2,
                        pointBackgroundColor: '#4ECDC4',
                        borderWidth: 3,
                        pointHoverRadius: 7,
                        spanGaps: true // Connect gaps to ensure continuous line
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#f0f0f0'
                            },
                            title: {
                                display: true,
                                text: 'Cumulative Academy Enrollments',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                stepSize: 50,
                                callback: function(value) {
                                    return value + ' enrollments';
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: '#f0f0f0'
                            },
                            title: {
                                display: true,
                                text: 'Academy Timeline: Day 2 (3 PM start) + Day 3 (complete) - Central Time',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45,
                                callback: function(value, index) {
                                    // Show every 4th label to avoid crowding
                                    return index % 4 === 0 ? this.getLabelForValue(value) : '';
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 13,
                                    weight: 'bold'
                                }
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: 'white',
                            bodyColor: 'white',
                            borderColor: 'rgba(255, 255, 255, 0.2)',
                            borderWidth: 1,
                            callbacks: {
                                title: function(context) {
                                    const label = context[0].label;
                                    if (label.startsWith('D2')) {
                                        return `Academy Day 2 at ${label.replace('D2 ', '')}`;
                                    } else if (label.startsWith('D3')) {
                                        return `Academy Day 3 at ${label.replace('D3 ', '')}`;
                                    }
                                    return label;
                                },
                                label: function(context) {
                                    if (context.datasetIndex === 0) {
                                        return `September 2025: ${context.parsed.y} enrollments`;
                                    } else {
                                        return `February 2026 (ACTUAL): ${context.parsed.y} enrollments`;
                                    }
                                },
                                afterBody: function(context) {
                                    if (context.length === 2) {
                                        const feb2026 = context.find(c => c.datasetIndex === 1)?.parsed.y || 0;
                                        const sept2025 = context.find(c => c.datasetIndex === 0)?.parsed.y || 0;
                                        const difference = feb2026 - sept2025;
                                        if (sept2025 > 0) {
                                            const pctChange = ((feb2026/sept2025-1)*100).toFixed(1);
                                            return [``, `Difference: ${difference > 0 ? '+' : ''}${difference} enrollments`, `Performance: ${pctChange}% vs Sept 2025`];
                                        }
                                    }
                                    return [];
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Academy Performance: September 2025 (TARGET) vs February 2026 (ACTUAL PROGRESS)',
                            font: {
                                size: 16,
                                weight: 'bold'
                            },
                            padding: {
                                top: 10,
                                bottom: 30
                            }
                        }
                    },
                    interaction: {
                        mode: 'index',
                        intersect: false
                    }
                }
            });
        }
        
        // Initialize comparative chart
        createComparativeChart();

        // Function to add new enrollment data point to comparative chart
        window.addEnrollmentDataPoint = function(enrollmentCount, timeLabel) {
            if (window.comparativeChart) {
                // Add new label and data point
                window.comparativeChart.data.labels.push(timeLabel);
                window.comparativeChart.data.datasets[1].data.push(enrollmentCount); // February 2026 is dataset index 1
                
                // Update the subtitle with new current enrollment and percentage
                const septTarget = 305;
                const percentage = ((enrollmentCount / septTarget) * 100).toFixed(1);
                const subtitle = document.querySelector('.chart-box.full-width-chart p');
                if (subtitle) {
                    subtitle.innerHTML = `<strong>Red Line:</strong> September 2025 complete performance (305 final) - <em>TARGET TO CHASE</em> | 
                        <strong>Teal Line:</strong> February 2026 actual data only (current: ${enrollmentCount} enrollments) - <em>${percentage}% of Sept baseline</em>`;
                }
                
                // Update the chart
                window.comparativeChart.update();
                
                console.log(`üìà Added enrollment data point: ${enrollmentCount} at ${timeLabel} (${percentage}% of Sept target)`);
            }
        };

        // Function to update enrollment with current date/time
        window.updateEnrollmentChart = function(newCount) {
            const now = new Date();
            const timeLabel = now.toLocaleTimeString('en-US', { 
                timeZone: 'America/Chicago',
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            });
            window.addEnrollmentDataPoint(newCount, timeLabel);
        };

        // Auto-refresh Day 3 charts from API data
        function refreshDay3Charts() {
            fetch('/api/attendance-data')
                .then(response => response.json())
                .then(data => {
                    if (data && data.length > 0) {
                        // Update the day3Attendance array with API data
                        day3Attendance = data.map(point => ({
                            time: point.time,
                            attendance: point.attendance,
                            showRate: point.showRate
                        }));
                        
                        // Update both charts
                        if (window.day3AttendanceChart) {
                            window.day3AttendanceChart.data.labels = day3Attendance.map(d => d.time);
                            window.day3AttendanceChart.data.datasets[0].data = day3Attendance.map(d => d.attendance);
                            window.day3AttendanceChart.update();
                        }
                        
                        if (window.day3ShowRateChart) {
                            window.day3ShowRateChart.data.labels = day3Attendance.map(d => d.time);
                            window.day3ShowRateChart.data.datasets[0].data = day3Attendance.map(d => d.showRate);
                            window.day3ShowRateChart.update();
                        }
                        
                        console.log(`üìä Day 3 charts refreshed with ${data.length} data points (latest: ${data[data.length-1].attendance} attendees)`);
                    }
                })
                .catch(error => {
                    console.error('Error refreshing Day 3 charts:', error);
                });
        }

        // Auto-update every 30 seconds for general updates
        setInterval(updateCountdown, 30000);
        setInterval(updateLastUpdate, 30000);
        setInterval(function() {
            updateAcademyData();
            updateLiveCumulativeChart();
        }, 30000);
        
        // Auto-refresh Day 3 charts every 15 seconds
        setInterval(refreshDay3Charts, 15000);
        
        // Initial Day 3 chart refresh on load
        setTimeout(refreshDay3Charts, 2000);
        
        // Function to update Live Event Status with current attendance
        window.updateLiveEventStatus = function(currentAttendance) {
            const totalTickets = 5663; // Total tickets sold (FINAL: 3,333 GA + 2,330 VIP)
            const showRate = (currentAttendance / totalTickets) * 100;
            
            // Update the Live Event Status display
            const currentAttendeesEl = document.getElementById('current-attendees');
            const currentShowRateEl = document.getElementById('current-show-rate');
            
            if (currentAttendeesEl) {
                currentAttendeesEl.textContent = currentAttendance.toLocaleString();
            }
            
            if (currentShowRateEl) {
                currentShowRateEl.textContent = showRate.toFixed(1) + '%';
            }
            
            console.log(`üìä Live Event Status updated: ${currentAttendance.toLocaleString()} attendees (${showRate.toFixed(1)}% show rate)`);
        };

        // Auto-update Academy count every 2 minutes (120 seconds)
        let currentEnrollmentCount = 283; // 283 ENROLLMENTS - Late evening growth (+83 ABOVE TARGET!)
        function updateAcademyCount() {
            const timestamp = new Date().toLocaleTimeString('en-US', { 
                timeZone: 'America/Chicago',
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            }) + ' CST';
            
            console.log(`üìä [${timestamp}] Academy Enrollments: ${currentEnrollmentCount}`);
            
            // Update the data
            academyData.totalEnrollments = currentEnrollmentCount;
            academyData.planA = Math.round(currentEnrollmentCount * 0.65); // Roughly 65% Plan A
            academyData.planB = currentEnrollmentCount - academyData.planA;
            
            // Recalculate derived values
            const newCashCollected = academyData.totalEnrollments * academyData.depositPerEnrollment;
            const newTotalRevenue = (academyData.planA * 10000) + (academyData.planB * 11000);
            const newConversionRate = (academyData.totalEnrollments / academyData.currentAttendees * 100);
            
            // Force update the display
            updateAcademyData();
            console.log(`‚úÖ Updated: ${currentEnrollmentCount} enrollments, $${newCashCollected.toLocaleString()} deposits`);
        }
        
        // Run Academy updates every 2 minutes - DISABLED to prevent reversion bug
        // setInterval(updateAcademyCount, 120000);

        console.log('‚úÖ Tabbed MSM Live Dashboard loaded successfully');

        // Password Protection
        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            const correctPassword = 'msm'; // CT team password
            
            if (password === correctPassword) {
                // Store authentication in session
                sessionStorage.setItem('dashboardAuthenticated', 'true');
                showDashboard();
            } else {
                document.getElementById('passwordError').style.display = 'block';
                document.getElementById('passwordInput').value = '';
                document.getElementById('passwordInput').focus();
            }
        }

        function showDashboard() {
            document.getElementById('passwordOverlay').style.display = 'none';
            document.getElementById('mainContent').classList.remove('hidden');
        }

        // Check if already authenticated
        function checkAuthentication() {
            if (sessionStorage.getItem('dashboardAuthenticated') === 'true') {
                showDashboard();
            }
        }

        // Allow Enter key to submit password
        document.getElementById('passwordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        // Check authentication on page load
        checkAuthentication();
    </script>
    </div> <!-- Close mainContent -->
</body>
</html>